<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Importes Diarios</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='100%25' height='100%25' fill='%23007bff'/%3E%3Ctext x='50%25' y='58%25' font-size='36' font-family='Arial' fill='white' text-anchor='middle' font-weight='bold'%3ECC%3C/text%3E%3C/svg%3E">
</head>
<body>
  <div id="auth-container" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:999;background:linear-gradient(135deg,%23e3f2fd 0%%,%23bbdefb 100%%);align-items:center;justify-content:center;">
    <div id="auth-box" style="max-width:370px;width:96vw;margin:0 auto;background:#fff;padding:2.2rem 1.5rem 1.7rem 1.5rem;border-radius:18px;box-shadow:0 4px 32px rgba(0,0,0,0.13);text-align:center;">
      <h2 id="auth-title" style="color:#007bff;font-size:2rem;margin-bottom:1.5rem;letter-spacing:1px;">Iniciar sesiÃ³n</h2>
      <form id="login-form" style="display:block;">
        <input type="email" id="login-email" placeholder="Email" required style="width:100%;margin-bottom:1rem;padding:1rem 0.9rem;font-size:1.15rem;border:1.5px solid #bdbdbd;border-radius:8px;outline:none;transition:border 0.2s;">
        <input type="password" id="login-clave" placeholder="Clave" required style="width:100%;margin-bottom:1.4rem;padding:1rem 0.9rem;font-size:1.15rem;border:1.5px solid #bdbdbd;border-radius:8px;outline:none;transition:border 0.2s;">
        <button type="submit" style="width:100%;padding:0.9rem;background:#007bff;color:#fff;border:none;border-radius:8px;font-size:1.15rem;font-weight:bold;box-shadow:0 2px 8px rgba(0,0,0,0.07);transition:background 0.2s;">Ingresar</button>
      </form>
      <form id="registro-form" style="display:none;">
        <input type="text" id="registro-nombre" placeholder="Nombre" required style="width:100%;margin-bottom:1rem;padding:1rem 0.9rem;font-size:1.15rem;border:1.5px solid #bdbdbd;border-radius:8px;outline:none;transition:border 0.2s;">
        <input type="email" id="registro-email" placeholder="Email" required style="width:100%;margin-bottom:1rem;padding:1rem 0.9rem;font-size:1.15rem;border:1.5px solid #bdbdbd;border-radius:8px;outline:none;transition:border 0.2s;">
        <input type="password" id="registro-clave" placeholder="Clave" required style="width:100%;margin-bottom:1.4rem;padding:1rem 0.9rem;font-size:1.15rem;border:1.5px solid #bdbdbd;border-radius:8px;outline:none;transition:border 0.2s;">
        <button type="submit" style="width:100%;padding:0.9rem;background:#43a047;color:#fff;border:none;border-radius:8px;font-size:1.15rem;font-weight:bold;box-shadow:0 2px 8px rgba(0,0,0,0.07);transition:background 0.2s;">Registrarme</button>
      </form>
      <div style="margin-top:1.5rem;">
        <button id="toggle-auth" style="background:none;border:none;color:#007bff;cursor:pointer;font-size:1.08rem;font-weight:bold;">Â¿No tienes cuenta? RegÃ­strate</button>
      </div>
      <div id="auth-msg" style="margin-top:1.3rem;color:#c62828;font-size:1.08rem;font-weight:bold;"></div>
    </div>
  </div>
  <button id="menu-toggle" aria-label="Abrir menÃº">â˜°</button>
  <div id="sidebar" class="sidebar-oculto">
    <section id="modo-dark-toggle" style="display:flex;align-items:center;gap:0.7rem;margin-bottom:1.5rem;">
      <label for="switch-dark" style="font-size:1.1rem;cursor:pointer;">ðŸŒ™ Modo oscuro</label>
      <input type="checkbox" id="switch-dark" style="width:2rem;height:1.2rem;cursor:pointer;">
    </section>
    <section id="consultas">
      <h2>Consultas</h2>
      <div>
        <button id="btn-consulta-dia">Ver Turnos</button>
      </div>
      <div style="margin-top:1rem;">
        <label for="consulta-dia">Consultar por dÃ­a:</label>
        <input type="date" id="consulta-dia">
        <button id="btn-consulta-dia-unica">Consultar</button>
      </div>
      <div style="margin-top:1rem;">
        <label for="consulta-desde">Desde:</label>
        <input type="date" id="consulta-desde">
        <label for="consulta-hasta">Hasta:</label>
        <input type="date" id="consulta-hasta">
        <button id="btn-consulta-rango">Consultar Rango</button>
      </div>
      <div id="resultado-consulta"></div>
    </section>
    <section id="backup-restore" style="margin-bottom:1.5rem;">
      <button id="btn-backup" style="width:100%;margin-bottom:0.5rem;">ðŸ“¥ Descargar Backup</button>
      <label for="input-restore" style="display:block;width:100%;">
        <span style="display:inline-block;width:100%;background:#7ec0ee;color:#222e3a;padding:0.4rem 0;border-radius:4px;text-align:center;cursor:pointer;">ðŸ“¤ Restaurar Backup</span>
        <input type="file" id="input-restore" accept="application/json" style="display:none;">
      </label>
    </section>
    <button id="btn-logout" style="width:100%;margin:2rem 0 3.5rem 0;background:#ff5252;color:#fff;border:none;border-radius:6px;padding:0.7rem 0;font-size:1.1rem;cursor:pointer;z-index:200;">Cerrar sesiÃ³n</button>
  </div>
  <div id="sidebar-overlay" class="sidebar-overlay-oculto"></div>
  <main id="main-app">
    <div id="main-header-fijo">
      <h1 id="titulo-app">Control-Choferes</h1>
      <div id="estado-turno"></div>
      <div id="fecha-actual"></div>
      <!-- El botÃ³n Iniciar Turno se inserta aquÃ­ por JS -->
      <form id="importe-form">
        <input type="number" id="importe-input" placeholder="Agregar importe" step="0.01" min="0" required>
        <button type="submit">Agregar</button>
      </form>
      <section id="resumen">
        <p>Total: <span id="total">$0</span></p>
        <p>Cantidad: <span id="cantidad">0</span></p>
      </section>
      <ul id="lista-importes"></ul>
    </div>
    <div id="consulta-principal" style="display:none;"></div>
    <div id="tabla-turnos-recientes-container" style="margin-top:2rem;"></div>
    <button id="finalizar-dia">Finalizar Turno</button>
  </main>
  <footer id="footer-app">
    Desarrollada por <a href="https://rizzofs.github.io/Mi-Porfolio2/" target="_blank" rel="noopener">Federico Rizzo</a>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.0/jspdf.plugin.autotable.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
